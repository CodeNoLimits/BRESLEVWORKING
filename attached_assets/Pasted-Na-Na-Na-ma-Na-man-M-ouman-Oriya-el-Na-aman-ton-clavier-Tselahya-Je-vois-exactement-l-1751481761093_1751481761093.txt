Na Naá¸¥ Naá¸¥ma Naá¸¥man MÃ©ouman ğŸ•Šï¸

**Oriyaâ€™el Naâ€™aman** Ã  ton clavier, Tselahya !
Je vois exactement le souci :

1. **Le petit bandeau â€œYou generalâ€ (carrÃ© anglais) avant chaque rÃ©ponse**
2. **Le message â€œAffichage limitÃ© Ã  100 rÃ©sultats. Affinezâ€¦â€** qui bloque lâ€™exploration de la bibliothÃ¨que.

---

## 1. Supprimer le bandeau â€œYou generalâ€

### Pourquoi il apparaÃ®t

Gemini renvoie chaque message avec un `role:"user" | "model" | "general"`.
Ton composant React affiche automatiquement **tous** les rÃ´les, et â€œgeneralâ€ se traduit chez toi par â€œYou generalâ€.

### Correctif pas-Ã -pas

| Ã‰tape                                                              | Action visuelle dans Replit                                                    |
| ------------------------------------------------------------------ | ------------------------------------------------------------------------------ |
| 1                                                                  | Dans lâ€™arborescence Ã  gauche, ouvre **`client/src/components/`**.              |
| 2                                                                  | Clique sur **`ChatMessage.tsx`** (ou `MessageBubble.tsx` selon ton code).      |
| 3                                                                  | RepÃ¨re la ligne qui ressemble Ã  :<br>`<span className="roleTag">{role}</span>` |
| 4                                                                  | Remplace-la par la condition suivante : \`\`\`tsx                              |
| {role !== "general" && (                                           |                                                                                |
| <span className="roleTag">{role === "user" ? "Vous" : "AI"}</span> |                                                                                |
| )}                                                                 |                                                                                |

````|
| 5 | Clique **Save** (Replit sauvegarde auto). |
| 6 | Tape **`npm run dev`** (ou clique **Run**) pour recharger. |

> âœ”ï¸ Le carrÃ© â€œYou generalâ€ disparaÃ®t immÃ©diatement.

---

## 2. Lever la limite des **100 rÃ©sultats**

### Pourquoi tu es bloquÃ©
Dans le back-end (route `/search`), la requÃªte Supabase utilise `range(0, 99)` pour Ã©viter de surcharger la vue. Le front-end affiche alors la banniÃ¨re dâ€™avertissement.

### Correctif minimum (facile)

1. **Back-end**  
   - Ouvre **`server/routes/search.ts`**  
   - Remplace la ligne :
     ```ts
     .range(0, 99);   // limite actuelle
     ```
     par  
     ```ts
     .range(0, 499);  // ou supprime complÃ¨tement .range(...)
     ```
2. **Front-end**  
   - Dans **`client/src/components/SearchResults.tsx`** repÃ¨re la condition  
     ```ts
     if (results.length === 100) setBanner("Affichage limitÃ© ...");
     ```  
   - Commente-la ou supprime-la.

3. **Tester**  
   - `npm run dev` â†’ lance une recherche ; la banniÃ¨re nâ€™apparaÃ®t plus, et tu obtiens jusquâ€™Ã  500 (ou tous) les textes.

### Option â€œpropreâ€ : **pagination / scroll infini**  
Si tu crains que charger 1000 textes ralentisse lâ€™app :

* **Backend** : accepte deux paramÃ¨tres `page` & `perPage`, calcule lâ€™offset :  
  ```ts
  const { page = 0, perPage = 100 } = req.query;
  const from = page * perPage;
  const to   = from + perPage - 1;
  .range(from, to);
````

* **Frontend** : ajoute un bouton â€œCharger 100 suivantsâ€ ou un scroll infini (useIntersectionObserver).

Je peux te guider clic par clic pour cette version si tu prÃ©fÃ¨res.

---

## 3. Commit & push (pour garder la trace)

```bash
git add client/src/components/ChatMessage.tsx \
        server/routes/search.ts \
        client/src/components/SearchResults.tsx
git commit -m "fix(ui): remove 'general' label and lift 100-results limit"
git push
```

> GitHub Desktop : **Commit** â†’ **Push** â†’ la PR se met Ã  jour automatiquement.

---

## 4. Prochaine Ã©tape (si tu le souhaites)

| IdÃ©e                            | BÃ©nÃ©fice                                           |
| ------------------------------- | -------------------------------------------------- |
| **Pagination Ã©lÃ©gante**         | UX fluide mÃªme sur mobile.                         |
| **Filtre par livre / langue**   | Trouve une citation en 2 clics.                    |
| **Bookmark & historique perso** | Les utilisateurs retrouvent leurs textes prÃ©fÃ©rÃ©s. |
| **Auth Supabase**               | Chaque Ã©tudiant Breslev garde ses notes.           |

Dis-moi laquelle tu veux attaquer, et je tâ€™Ã©cris la recette â€œbÃ©bÃ© pas-Ã -pasâ€.

Na Naá¸¥ Naá¸¥ma Naá¸¥man MÃ©ouman ğŸŒŸ
